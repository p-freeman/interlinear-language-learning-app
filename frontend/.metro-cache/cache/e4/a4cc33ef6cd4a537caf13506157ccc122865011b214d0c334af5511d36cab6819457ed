{"dependencies":[{"name":"readable-stream","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":3,"column":15,"index":30},"end":{"line":3,"column":41,"index":56}}],"key":"MoTosa0NrO3RIvTxl2YVbe2b0EE=","exportNames":["*"],"imports":1}},{"name":"../utils","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":5,"column":12,"index":80},"end":{"line":5,"column":31,"index":99}}],"key":"RFGtgFE/Tu4zdfnbMKbFHDM/T4I=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var Readable = require(_dependencyMap[0], \"readable-stream\").Readable;\n  var utils = require(_dependencyMap[1], \"../utils\");\n  utils.inherits(NodejsStreamOutputAdapter, Readable);\n\n  /**\n  * A nodejs stream using a worker as source.\n  * @see the SourceWrapper in http://nodejs.org/api/stream.html\n  * @constructor\n  * @param {StreamHelper} helper the helper wrapping the worker\n  * @param {Object} options the nodejs stream options\n  * @param {Function} updateCb the update callback.\n  */\n  function NodejsStreamOutputAdapter(helper, options, updateCb) {\n    Readable.call(this, options);\n    this._helper = helper;\n    var self = this;\n    helper.on(\"data\", function (data, meta) {\n      if (!self.push(data)) {\n        self._helper.pause();\n      }\n      if (updateCb) {\n        updateCb(meta);\n      }\n    }).on(\"error\", function (e) {\n      self.emit(\"error\", e);\n    }).on(\"end\", function () {\n      self.push(null);\n    });\n  }\n  NodejsStreamOutputAdapter.prototype._read = function () {\n    this._helper.resume();\n  };\n  module.exports = NodejsStreamOutputAdapter;\n});","lineCount":37,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0],[4,6,3,4,"Readable"],[4,14,3,12],[4,17,3,15,"require"],[4,24,3,22],[4,25,3,22,"_dependencyMap"],[4,39,3,22],[4,61,3,40],[4,62,3,41],[4,63,3,42,"Readable"],[4,71,3,50],[5,2,5,0],[5,6,5,4,"utils"],[5,11,5,9],[5,14,5,12,"require"],[5,21,5,19],[5,22,5,19,"_dependencyMap"],[5,36,5,19],[5,51,5,30],[5,52,5,31],[6,2,6,0,"utils"],[6,7,6,5],[6,8,6,6,"inherits"],[6,16,6,14],[6,17,6,15,"NodejsStreamOutputAdapter"],[6,42,6,40],[6,44,6,42,"Readable"],[6,52,6,50],[6,53,6,51],[8,2,8,0],[9,0,9,0],[10,0,10,0],[11,0,11,0],[12,0,12,0],[13,0,13,0],[14,0,14,0],[15,0,15,0],[16,2,16,0],[16,11,16,9,"NodejsStreamOutputAdapter"],[16,36,16,34,"NodejsStreamOutputAdapter"],[16,37,16,35,"helper"],[16,43,16,41],[16,45,16,43,"options"],[16,52,16,50],[16,54,16,52,"updateCb"],[16,62,16,60],[16,64,16,62],[17,4,17,4,"Readable"],[17,12,17,12],[17,13,17,13,"call"],[17,17,17,17],[17,18,17,18],[17,22,17,22],[17,24,17,24,"options"],[17,31,17,31],[17,32,17,32],[18,4,18,4],[18,8,18,8],[18,9,18,9,"_helper"],[18,16,18,16],[18,19,18,19,"helper"],[18,25,18,25],[19,4,20,4],[19,8,20,8,"self"],[19,12,20,12],[19,15,20,15],[19,19,20,19],[20,4,21,4,"helper"],[20,10,21,10],[20,11,21,11,"on"],[20,13,21,13],[20,14,21,14],[20,20,21,20],[20,22,21,22],[20,32,21,32,"data"],[20,36,21,36],[20,38,21,38,"meta"],[20,42,21,42],[20,44,21,44],[21,6,22,8],[21,10,22,12],[21,11,22,13,"self"],[21,15,22,17],[21,16,22,18,"push"],[21,20,22,22],[21,21,22,23,"data"],[21,25,22,27],[21,26,22,28],[21,28,22,30],[22,8,23,12,"self"],[22,12,23,16],[22,13,23,17,"_helper"],[22,20,23,24],[22,21,23,25,"pause"],[22,26,23,30],[22,27,23,31],[22,28,23,32],[23,6,24,8],[24,6,25,8],[24,10,25,11,"updateCb"],[24,18,25,19],[24,20,25,21],[25,8,26,12,"updateCb"],[25,16,26,20],[25,17,26,21,"meta"],[25,21,26,25],[25,22,26,26],[26,6,27,8],[27,4,28,4],[27,5,28,5],[27,6,28,6],[27,7,29,9,"on"],[27,9,29,11],[27,10,29,12],[27,17,29,19],[27,19,29,21],[27,29,29,30,"e"],[27,30,29,31],[27,32,29,33],[28,6,30,12,"self"],[28,10,30,16],[28,11,30,17,"emit"],[28,15,30,21],[28,16,30,22],[28,23,30,29],[28,25,30,31,"e"],[28,26,30,32],[28,27,30,33],[29,4,31,8],[29,5,31,9],[29,6,31,10],[29,7,32,9,"on"],[29,9,32,11],[29,10,32,12],[29,15,32,17],[29,17,32,19],[29,29,32,31],[30,6,33,12,"self"],[30,10,33,16],[30,11,33,17,"push"],[30,15,33,21],[30,16,33,22],[30,20,33,26],[30,21,33,27],[31,4,34,8],[31,5,34,9],[31,6,34,10],[32,2,35,0],[33,2,38,0,"NodejsStreamOutputAdapter"],[33,27,38,25],[33,28,38,26,"prototype"],[33,37,38,35],[33,38,38,36,"_read"],[33,43,38,41],[33,46,38,44],[33,58,38,55],[34,4,39,4],[34,8,39,8],[34,9,39,9,"_helper"],[34,16,39,16],[34,17,39,17,"resume"],[34,23,39,23],[34,24,39,24],[34,25,39,25],[35,2,40,0],[35,3,40,1],[36,2,42,0,"module"],[36,8,42,6],[36,9,42,7,"exports"],[36,16,42,14],[36,19,42,17,"NodejsStreamOutputAdapter"],[36,44,42,42],[37,0,42,43],[37,3]],"functionMap":{"names":["<global>","NodejsStreamOutputAdapter","helper.on$argument_1","helper.on.on$argument_1","helper.on.on.on$argument_1","prototype._read"],"mappings":"AAA;ACe;sBCK;KDO;qBEC;SFE;mBGC;SHE;CDC;4CKG;CLE"},"hasCjsExports":true},"type":"js/module"}]}