{"dependencies":[{"name":"pako","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":11,"index":164},"end":{"line":4,"column":26,"index":179}}],"key":"Saro2T9EUS076I8heJcSFZcmYOw=","exportNames":["*"],"imports":1}},{"name":"./utils","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":5,"column":12,"index":193},"end":{"line":5,"column":30,"index":211}}],"key":"Arg6QRuIuy5D/jfcnxX1qJiHjX8=","exportNames":["*"],"imports":1}},{"name":"./stream/GenericWorker","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":6,"column":20,"index":233},"end":{"line":6,"column":53,"index":266}}],"key":"MymtXhR8olOTwX44v19Y97zo9MM=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var USE_TYPEDARRAY = typeof Uint8Array !== \"undefined\" && typeof Uint16Array !== \"undefined\" && typeof Uint32Array !== \"undefined\";\n  var pako = require(_dependencyMap[0], \"pako\");\n  var utils = require(_dependencyMap[1], \"./utils\");\n  var GenericWorker = require(_dependencyMap[2], \"./stream/GenericWorker\");\n  var ARRAY_TYPE = USE_TYPEDARRAY ? \"uint8array\" : \"array\";\n  exports.magic = \"\\x08\\x00\";\n\n  /**\n   * Create a worker that uses pako to inflate/deflate.\n   * @constructor\n   * @param {String} action the name of the pako function to call : either \"Deflate\" or \"Inflate\".\n   * @param {Object} options the options to use when (de)compressing.\n   */\n  function FlateWorker(action, options) {\n    GenericWorker.call(this, \"FlateWorker/\" + action);\n    this._pako = null;\n    this._pakoAction = action;\n    this._pakoOptions = options;\n    // the `meta` object from the last chunk received\n    // this allow this worker to pass around metadata\n    this.meta = {};\n  }\n  utils.inherits(FlateWorker, GenericWorker);\n\n  /**\n   * @see GenericWorker.processChunk\n   */\n  FlateWorker.prototype.processChunk = function (chunk) {\n    this.meta = chunk.meta;\n    if (this._pako === null) {\n      this._createPako();\n    }\n    this._pako.push(utils.transformTo(ARRAY_TYPE, chunk.data), false);\n  };\n\n  /**\n   * @see GenericWorker.flush\n   */\n  FlateWorker.prototype.flush = function () {\n    GenericWorker.prototype.flush.call(this);\n    if (this._pako === null) {\n      this._createPako();\n    }\n    this._pako.push([], true);\n  };\n  /**\n   * @see GenericWorker.cleanUp\n   */\n  FlateWorker.prototype.cleanUp = function () {\n    GenericWorker.prototype.cleanUp.call(this);\n    this._pako = null;\n  };\n\n  /**\n   * Create the _pako object.\n   * TODO: lazy-loading this object isn't the best solution but it's the\n   * quickest. The best solution is to lazy-load the worker list. See also the\n   * issue #446.\n   */\n  FlateWorker.prototype._createPako = function () {\n    this._pako = new pako[this._pakoAction]({\n      raw: true,\n      level: this._pakoOptions.level || -1 // default compression\n    });\n    var self = this;\n    this._pako.onData = function (data) {\n      self.push({\n        data: data,\n        meta: self.meta\n      });\n    };\n  };\n  exports.compressWorker = function (compressionOptions) {\n    return new FlateWorker(\"Deflate\", compressionOptions);\n  };\n  exports.uncompressWorker = function () {\n    return new FlateWorker(\"Inflate\", {});\n  };\n});","lineCount":82,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0],[4,6,2,4,"USE_TYPEDARRAY"],[4,20,2,18],[4,23,2,22],[4,30,2,29,"Uint8Array"],[4,40,2,39],[4,45,2,44],[4,56,2,55],[4,60,2,61],[4,67,2,68,"Uint16Array"],[4,78,2,79],[4,83,2,84],[4,94,2,96],[4,98,2,101],[4,105,2,108,"Uint32Array"],[4,116,2,119],[4,121,2,124],[4,132,2,136],[5,2,4,0],[5,6,4,4,"pako"],[5,10,4,8],[5,13,4,11,"require"],[5,20,4,18],[5,21,4,18,"_dependencyMap"],[5,35,4,18],[5,46,4,25],[5,47,4,26],[6,2,5,0],[6,6,5,4,"utils"],[6,11,5,9],[6,14,5,12,"require"],[6,21,5,19],[6,22,5,19,"_dependencyMap"],[6,36,5,19],[6,50,5,29],[6,51,5,30],[7,2,6,0],[7,6,6,4,"GenericWorker"],[7,19,6,17],[7,22,6,20,"require"],[7,29,6,27],[7,30,6,27,"_dependencyMap"],[7,44,6,27],[7,73,6,52],[7,74,6,53],[8,2,8,0],[8,6,8,4,"ARRAY_TYPE"],[8,16,8,14],[8,19,8,17,"USE_TYPEDARRAY"],[8,33,8,31],[8,36,8,34],[8,48,8,46],[8,51,8,49],[8,58,8,56],[9,2,10,0,"exports"],[9,9,10,7],[9,10,10,8,"magic"],[9,15,10,13],[9,18,10,16],[9,28,10,26],[11,2,12,0],[12,0,13,0],[13,0,14,0],[14,0,15,0],[15,0,16,0],[16,0,17,0],[17,2,18,0],[17,11,18,9,"FlateWorker"],[17,22,18,20,"FlateWorker"],[17,23,18,21,"action"],[17,29,18,27],[17,31,18,29,"options"],[17,38,18,36],[17,40,18,38],[18,4,19,4,"GenericWorker"],[18,17,19,17],[18,18,19,18,"call"],[18,22,19,22],[18,23,19,23],[18,27,19,27],[18,29,19,29],[18,43,19,43],[18,46,19,46,"action"],[18,52,19,52],[18,53,19,53],[19,4,21,4],[19,8,21,8],[19,9,21,9,"_pako"],[19,14,21,14],[19,17,21,17],[19,21,21,21],[20,4,22,4],[20,8,22,8],[20,9,22,9,"_pakoAction"],[20,20,22,20],[20,23,22,23,"action"],[20,29,22,29],[21,4,23,4],[21,8,23,8],[21,9,23,9,"_pakoOptions"],[21,21,23,21],[21,24,23,24,"options"],[21,31,23,31],[22,4,24,4],[23,4,25,4],[24,4,26,4],[24,8,26,8],[24,9,26,9,"meta"],[24,13,26,13],[24,16,26,16],[24,17,26,17],[24,18,26,18],[25,2,27,0],[26,2,29,0,"utils"],[26,7,29,5],[26,8,29,6,"inherits"],[26,16,29,14],[26,17,29,15,"FlateWorker"],[26,28,29,26],[26,30,29,28,"GenericWorker"],[26,43,29,41],[26,44,29,42],[28,2,31,0],[29,0,32,0],[30,0,33,0],[31,2,34,0,"FlateWorker"],[31,13,34,11],[31,14,34,12,"prototype"],[31,23,34,21],[31,24,34,22,"processChunk"],[31,36,34,34],[31,39,34,37],[31,49,34,47,"chunk"],[31,54,34,52],[31,56,34,54],[32,4,35,4],[32,8,35,8],[32,9,35,9,"meta"],[32,13,35,13],[32,16,35,16,"chunk"],[32,21,35,21],[32,22,35,22,"meta"],[32,26,35,26],[33,4,36,4],[33,8,36,8],[33,12,36,12],[33,13,36,13,"_pako"],[33,18,36,18],[33,23,36,23],[33,27,36,27],[33,29,36,29],[34,6,37,8],[34,10,37,12],[34,11,37,13,"_createPako"],[34,22,37,24],[34,23,37,25],[34,24,37,26],[35,4,38,4],[36,4,39,4],[36,8,39,8],[36,9,39,9,"_pako"],[36,14,39,14],[36,15,39,15,"push"],[36,19,39,19],[36,20,39,20,"utils"],[36,25,39,25],[36,26,39,26,"transformTo"],[36,37,39,37],[36,38,39,38,"ARRAY_TYPE"],[36,48,39,48],[36,50,39,50,"chunk"],[36,55,39,55],[36,56,39,56,"data"],[36,60,39,60],[36,61,39,61],[36,63,39,63],[36,68,39,68],[36,69,39,69],[37,2,40,0],[37,3,40,1],[39,2,42,0],[40,0,43,0],[41,0,44,0],[42,2,45,0,"FlateWorker"],[42,13,45,11],[42,14,45,12,"prototype"],[42,23,45,21],[42,24,45,22,"flush"],[42,29,45,27],[42,32,45,30],[42,44,45,42],[43,4,46,4,"GenericWorker"],[43,17,46,17],[43,18,46,18,"prototype"],[43,27,46,27],[43,28,46,28,"flush"],[43,33,46,33],[43,34,46,34,"call"],[43,38,46,38],[43,39,46,39],[43,43,46,43],[43,44,46,44],[44,4,47,4],[44,8,47,8],[44,12,47,12],[44,13,47,13,"_pako"],[44,18,47,18],[44,23,47,23],[44,27,47,27],[44,29,47,29],[45,6,48,8],[45,10,48,12],[45,11,48,13,"_createPako"],[45,22,48,24],[45,23,48,25],[45,24,48,26],[46,4,49,4],[47,4,50,4],[47,8,50,8],[47,9,50,9,"_pako"],[47,14,50,14],[47,15,50,15,"push"],[47,19,50,19],[47,20,50,20],[47,22,50,22],[47,24,50,24],[47,28,50,28],[47,29,50,29],[48,2,51,0],[48,3,51,1],[49,2,52,0],[50,0,53,0],[51,0,54,0],[52,2,55,0,"FlateWorker"],[52,13,55,11],[52,14,55,12,"prototype"],[52,23,55,21],[52,24,55,22,"cleanUp"],[52,31,55,29],[52,34,55,32],[52,46,55,44],[53,4,56,4,"GenericWorker"],[53,17,56,17],[53,18,56,18,"prototype"],[53,27,56,27],[53,28,56,28,"cleanUp"],[53,35,56,35],[53,36,56,36,"call"],[53,40,56,40],[53,41,56,41],[53,45,56,45],[53,46,56,46],[54,4,57,4],[54,8,57,8],[54,9,57,9,"_pako"],[54,14,57,14],[54,17,57,17],[54,21,57,21],[55,2,58,0],[55,3,58,1],[57,2,60,0],[58,0,61,0],[59,0,62,0],[60,0,63,0],[61,0,64,0],[62,0,65,0],[63,2,66,0,"FlateWorker"],[63,13,66,11],[63,14,66,12,"prototype"],[63,23,66,21],[63,24,66,22,"_createPako"],[63,35,66,33],[63,38,66,36],[63,50,66,48],[64,4,67,4],[64,8,67,8],[64,9,67,9,"_pako"],[64,14,67,14],[64,17,67,17],[64,21,67,21,"pako"],[64,25,67,25],[64,26,67,26],[64,30,67,30],[64,31,67,31,"_pakoAction"],[64,42,67,42],[64,43,67,43],[64,44,67,44],[65,6,68,8,"raw"],[65,9,68,11],[65,11,68,13],[65,15,68,17],[66,6,69,8,"level"],[66,11,69,13],[66,13,69,15],[66,17,69,19],[66,18,69,20,"_pakoOptions"],[66,30,69,32],[66,31,69,33,"level"],[66,36,69,38],[66,40,69,42],[66,41,69,43],[66,42,69,44],[66,43,69,45],[67,4,70,4],[67,5,70,5],[67,6,70,6],[68,4,71,4],[68,8,71,8,"self"],[68,12,71,12],[68,15,71,15],[68,19,71,19],[69,4,72,4],[69,8,72,8],[69,9,72,9,"_pako"],[69,14,72,14],[69,15,72,15,"onData"],[69,21,72,21],[69,24,72,24],[69,34,72,33,"data"],[69,38,72,37],[69,40,72,39],[70,6,73,8,"self"],[70,10,73,12],[70,11,73,13,"push"],[70,15,73,17],[70,16,73,18],[71,8,74,12,"data"],[71,12,74,16],[71,14,74,19,"data"],[71,18,74,23],[72,8,75,12,"meta"],[72,12,75,16],[72,14,75,19,"self"],[72,18,75,23],[72,19,75,24,"meta"],[73,6,76,8],[73,7,76,9],[73,8,76,10],[74,4,77,4],[74,5,77,5],[75,2,78,0],[75,3,78,1],[76,2,80,0,"exports"],[76,9,80,7],[76,10,80,8,"compressWorker"],[76,24,80,22],[76,27,80,25],[76,37,80,35,"compressionOptions"],[76,55,80,53],[76,57,80,55],[77,4,81,4],[77,11,81,11],[77,15,81,15,"FlateWorker"],[77,26,81,26],[77,27,81,27],[77,36,81,36],[77,38,81,38,"compressionOptions"],[77,56,81,56],[77,57,81,57],[78,2,82,0],[78,3,82,1],[79,2,83,0,"exports"],[79,9,83,7],[79,10,83,8,"uncompressWorker"],[79,26,83,24],[79,29,83,27],[79,41,83,39],[80,4,84,4],[80,11,84,11],[80,15,84,15,"FlateWorker"],[80,26,84,26],[80,27,84,27],[80,36,84,36],[80,38,84,38],[80,39,84,39],[80,40,84,40],[80,41,84,41],[81,2,85,0],[81,3,85,1],[82,0,85,2],[82,3]],"functionMap":{"names":["<global>","FlateWorker","FlateWorker.prototype.processChunk","FlateWorker.prototype.flush","FlateWorker.prototype.cleanUp","FlateWorker.prototype._createPako","_pako.onData","exports.compressWorker","exports.uncompressWorker"],"mappings":"AAA;ACiB;CDS;qCEO;CFM;8BGK;CHM;gCII;CJG;oCKQ;wBCM;KDK;CLC;yBOE;CPE;2BQC;CRE"},"hasCjsExports":true},"type":"js/module"}]}