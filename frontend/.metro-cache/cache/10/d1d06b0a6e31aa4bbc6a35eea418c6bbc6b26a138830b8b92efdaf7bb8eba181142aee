{"dependencies":[{"name":"../utils","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":2,"column":12,"index":26},"end":{"line":2,"column":31,"index":45}}],"key":"RFGtgFE/Tu4zdfnbMKbFHDM/T4I=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var utils = require(_dependencyMap[0], \"../utils\");\n  function DataReader(data) {\n    this.data = data; // type : see implementation\n    this.length = data.length;\n    this.index = 0;\n    this.zero = 0;\n  }\n  DataReader.prototype = {\n    /**\n     * Check that the offset will not go too far.\n     * @param {string} offset the additional offset to check.\n     * @throws {Error} an Error if the offset is out of bounds.\n     */\n    checkOffset: function (offset) {\n      this.checkIndex(this.index + offset);\n    },\n    /**\n     * Check that the specified index will not be too far.\n     * @param {string} newIndex the index to check.\n     * @throws {Error} an Error if the index is out of bounds.\n     */\n    checkIndex: function (newIndex) {\n      if (this.length < this.zero + newIndex || newIndex < 0) {\n        throw new Error(\"End of data reached (data length = \" + this.length + \", asked index = \" + newIndex + \"). Corrupted zip ?\");\n      }\n    },\n    /**\n     * Change the index.\n     * @param {number} newIndex The new index.\n     * @throws {Error} if the new index is out of the data.\n     */\n    setIndex: function (newIndex) {\n      this.checkIndex(newIndex);\n      this.index = newIndex;\n    },\n    /**\n     * Skip the next n bytes.\n     * @param {number} n the number of bytes to skip.\n     * @throws {Error} if the new index is out of the data.\n     */\n    skip: function (n) {\n      this.setIndex(this.index + n);\n    },\n    /**\n     * Get the byte at the specified index.\n     * @param {number} i the index to use.\n     * @return {number} a byte.\n     */\n    byteAt: function () {\n      // see implementations\n    },\n    /**\n     * Get the next number with a given byte size.\n     * @param {number} size the number of bytes to read.\n     * @return {number} the corresponding number.\n     */\n    readInt: function (size) {\n      var result = 0,\n        i;\n      this.checkOffset(size);\n      for (i = this.index + size - 1; i >= this.index; i--) {\n        result = (result << 8) + this.byteAt(i);\n      }\n      this.index += size;\n      return result;\n    },\n    /**\n     * Get the next string with a given byte size.\n     * @param {number} size the number of bytes to read.\n     * @return {string} the corresponding string.\n     */\n    readString: function (size) {\n      return utils.transformTo(\"string\", this.readData(size));\n    },\n    /**\n     * Get raw data without conversion, <size> bytes.\n     * @param {number} size the number of bytes to read.\n     * @return {Object} the raw data, implementation specific.\n     */\n    readData: function () {\n      // see implementations\n    },\n    /**\n     * Find the last occurrence of a zip signature (4 bytes).\n     * @param {string} sig the signature to find.\n     * @return {number} the index of the last occurrence, -1 if not found.\n     */\n    lastIndexOfSignature: function () {\n      // see implementations\n    },\n    /**\n     * Read the signature (4 bytes) at the current position and compare it with sig.\n     * @param {string} sig the expected signature\n     * @return {boolean} true if the signature matches, false otherwise.\n     */\n    readAndCheckSignature: function () {\n      // see implementations\n    },\n    /**\n     * Get the next date.\n     * @return {Date} the date.\n     */\n    readDate: function () {\n      var dostime = this.readInt(4);\n      return new Date(Date.UTC((dostime >> 25 & 0x7f) + 1980,\n      // year\n      (dostime >> 21 & 0x0f) - 1,\n      // month\n      dostime >> 16 & 0x1f,\n      // day\n      dostime >> 11 & 0x1f,\n      // hour\n      dostime >> 5 & 0x3f,\n      // minute\n      (dostime & 0x1f) << 1)); // second\n    }\n  };\n  module.exports = DataReader;\n});","lineCount":122,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0],[4,6,2,4,"utils"],[4,11,2,9],[4,14,2,12,"require"],[4,21,2,19],[4,22,2,19,"_dependencyMap"],[4,36,2,19],[4,51,2,30],[4,52,2,31],[5,2,4,0],[5,11,4,9,"DataReader"],[5,21,4,19,"DataReader"],[5,22,4,20,"data"],[5,26,4,24],[5,28,4,26],[6,4,5,4],[6,8,5,8],[6,9,5,9,"data"],[6,13,5,13],[6,16,5,16,"data"],[6,20,5,20],[6,21,5,21],[6,22,5,22],[7,4,6,4],[7,8,6,8],[7,9,6,9,"length"],[7,15,6,15],[7,18,6,18,"data"],[7,22,6,22],[7,23,6,23,"length"],[7,29,6,29],[8,4,7,4],[8,8,7,8],[8,9,7,9,"index"],[8,14,7,14],[8,17,7,17],[8,18,7,18],[9,4,8,4],[9,8,8,8],[9,9,8,9,"zero"],[9,13,8,13],[9,16,8,16],[9,17,8,17],[10,2,9,0],[11,2,10,0,"DataReader"],[11,12,10,10],[11,13,10,11,"prototype"],[11,22,10,20],[11,25,10,23],[12,4,11,4],[13,0,12,0],[14,0,13,0],[15,0,14,0],[16,0,15,0],[17,4,16,4,"checkOffset"],[17,15,16,15],[17,17,16,17],[17,26,16,17,"checkOffset"],[17,27,16,26,"offset"],[17,33,16,32],[17,35,16,34],[18,6,17,8],[18,10,17,12],[18,11,17,13,"checkIndex"],[18,21,17,23],[18,22,17,24],[18,26,17,28],[18,27,17,29,"index"],[18,32,17,34],[18,35,17,37,"offset"],[18,41,17,43],[18,42,17,44],[19,4,18,4],[19,5,18,5],[20,4,19,4],[21,0,20,0],[22,0,21,0],[23,0,22,0],[24,0,23,0],[25,4,24,4,"checkIndex"],[25,14,24,14],[25,16,24,16],[25,25,24,16,"checkIndex"],[25,26,24,25,"newIndex"],[25,34,24,33],[25,36,24,35],[26,6,25,8],[26,10,25,12],[26,14,25,16],[26,15,25,17,"length"],[26,21,25,23],[26,24,25,26],[26,28,25,30],[26,29,25,31,"zero"],[26,33,25,35],[26,36,25,38,"newIndex"],[26,44,25,46],[26,48,25,50,"newIndex"],[26,56,25,58],[26,59,25,61],[26,60,25,62],[26,62,25,64],[27,8,26,12],[27,14,26,18],[27,18,26,22,"Error"],[27,23,26,27],[27,24,26,28],[27,61,26,65],[27,64,26,68],[27,68,26,72],[27,69,26,73,"length"],[27,75,26,79],[27,78,26,82],[27,96,26,100],[27,99,26,104,"newIndex"],[27,107,26,113],[27,110,26,116],[27,130,26,136],[27,131,26,137],[28,6,27,8],[29,4,28,4],[29,5,28,5],[30,4,29,4],[31,0,30,0],[32,0,31,0],[33,0,32,0],[34,0,33,0],[35,4,34,4,"setIndex"],[35,12,34,12],[35,14,34,14],[35,23,34,14,"setIndex"],[35,24,34,23,"newIndex"],[35,32,34,31],[35,34,34,33],[36,6,35,8],[36,10,35,12],[36,11,35,13,"checkIndex"],[36,21,35,23],[36,22,35,24,"newIndex"],[36,30,35,32],[36,31,35,33],[37,6,36,8],[37,10,36,12],[37,11,36,13,"index"],[37,16,36,18],[37,19,36,21,"newIndex"],[37,27,36,29],[38,4,37,4],[38,5,37,5],[39,4,38,4],[40,0,39,0],[41,0,40,0],[42,0,41,0],[43,0,42,0],[44,4,43,4,"skip"],[44,8,43,8],[44,10,43,10],[44,19,43,10,"skip"],[44,20,43,19,"n"],[44,21,43,20],[44,23,43,22],[45,6,44,8],[45,10,44,12],[45,11,44,13,"setIndex"],[45,19,44,21],[45,20,44,22],[45,24,44,26],[45,25,44,27,"index"],[45,30,44,32],[45,33,44,35,"n"],[45,34,44,36],[45,35,44,37],[46,4,45,4],[46,5,45,5],[47,4,46,4],[48,0,47,0],[49,0,48,0],[50,0,49,0],[51,0,50,0],[52,4,51,4,"byteAt"],[52,10,51,10],[52,12,51,12],[52,21,51,12,"byteAt"],[52,22,51,12],[52,24,51,23],[53,6,52,8],[54,4,52,8],[54,5,53,5],[55,4,54,4],[56,0,55,0],[57,0,56,0],[58,0,57,0],[59,0,58,0],[60,4,59,4,"readInt"],[60,11,59,11],[60,13,59,13],[60,22,59,13,"readInt"],[60,23,59,22,"size"],[60,27,59,26],[60,29,59,28],[61,6,60,8],[61,10,60,12,"result"],[61,16,60,18],[61,19,60,21],[61,20,60,22],[62,8,61,12,"i"],[62,9,61,13],[63,6,62,8],[63,10,62,12],[63,11,62,13,"checkOffset"],[63,22,62,24],[63,23,62,25,"size"],[63,27,62,29],[63,28,62,30],[64,6,63,8],[64,11,63,13,"i"],[64,12,63,14],[64,15,63,17],[64,19,63,21],[64,20,63,22,"index"],[64,25,63,27],[64,28,63,30,"size"],[64,32,63,34],[64,35,63,37],[64,36,63,38],[64,38,63,40,"i"],[64,39,63,41],[64,43,63,45],[64,47,63,49],[64,48,63,50,"index"],[64,53,63,55],[64,55,63,57,"i"],[64,56,63,58],[64,58,63,60],[64,60,63,62],[65,8,64,12,"result"],[65,14,64,18],[65,17,64,21],[65,18,64,22,"result"],[65,24,64,28],[65,28,64,32],[65,29,64,33],[65,33,64,37],[65,37,64,41],[65,38,64,42,"byteAt"],[65,44,64,48],[65,45,64,49,"i"],[65,46,64,50],[65,47,64,51],[66,6,65,8],[67,6,66,8],[67,10,66,12],[67,11,66,13,"index"],[67,16,66,18],[67,20,66,22,"size"],[67,24,66,26],[68,6,67,8],[68,13,67,15,"result"],[68,19,67,21],[69,4,68,4],[69,5,68,5],[70,4,69,4],[71,0,70,0],[72,0,71,0],[73,0,72,0],[74,0,73,0],[75,4,74,4,"readString"],[75,14,74,14],[75,16,74,16],[75,25,74,16,"readString"],[75,26,74,25,"size"],[75,30,74,29],[75,32,74,31],[76,6,75,8],[76,13,75,15,"utils"],[76,18,75,20],[76,19,75,21,"transformTo"],[76,30,75,32],[76,31,75,33],[76,39,75,41],[76,41,75,43],[76,45,75,47],[76,46,75,48,"readData"],[76,54,75,56],[76,55,75,57,"size"],[76,59,75,61],[76,60,75,62],[76,61,75,63],[77,4,76,4],[77,5,76,5],[78,4,77,4],[79,0,78,0],[80,0,79,0],[81,0,80,0],[82,0,81,0],[83,4,82,4,"readData"],[83,12,82,12],[83,14,82,14],[83,23,82,14,"readData"],[83,24,82,14],[83,26,82,25],[84,6,83,8],[85,4,83,8],[85,5,84,5],[86,4,85,4],[87,0,86,0],[88,0,87,0],[89,0,88,0],[90,0,89,0],[91,4,90,4,"lastIndexOfSignature"],[91,24,90,24],[91,26,90,26],[91,35,90,26,"lastIndexOfSignature"],[91,36,90,26],[91,38,90,37],[92,6,91,8],[93,4,91,8],[93,5,92,5],[94,4,93,4],[95,0,94,0],[96,0,95,0],[97,0,96,0],[98,0,97,0],[99,4,98,4,"readAndCheckSignature"],[99,25,98,25],[99,27,98,27],[99,36,98,27,"readAndCheckSignature"],[99,37,98,27],[99,39,98,38],[100,6,99,8],[101,4,99,8],[101,5,100,5],[102,4,101,4],[103,0,102,0],[104,0,103,0],[105,0,104,0],[106,4,105,4,"readDate"],[106,12,105,12],[106,14,105,14],[106,23,105,14,"readDate"],[106,24,105,14],[106,26,105,25],[107,6,106,8],[107,10,106,12,"dostime"],[107,17,106,19],[107,20,106,22],[107,24,106,26],[107,25,106,27,"readInt"],[107,32,106,34],[107,33,106,35],[107,34,106,36],[107,35,106,37],[108,6,107,8],[108,13,107,15],[108,17,107,19,"Date"],[108,21,107,23],[108,22,107,24,"Date"],[108,26,107,28],[108,27,107,29,"UTC"],[108,30,107,32],[108,31,108,12],[108,32,108,14,"dostime"],[108,39,108,21],[108,43,108,25],[108,45,108,27],[108,48,108,31],[108,52,108,35],[108,56,108,39],[108,60,108,43],[109,6,108,45],[110,6,109,12],[110,7,109,14,"dostime"],[110,14,109,21],[110,18,109,25],[110,20,109,27],[110,23,109,31],[110,27,109,35],[110,31,109,39],[110,32,109,40],[111,6,109,42],[112,6,110,13,"dostime"],[112,13,110,20],[112,17,110,24],[112,19,110,26],[112,22,110,30],[112,26,110,34],[113,6,110,36],[114,6,111,13,"dostime"],[114,13,111,20],[114,17,111,24],[114,19,111,26],[114,22,111,30],[114,26,111,34],[115,6,111,36],[116,6,112,13,"dostime"],[116,13,112,20],[116,17,112,24],[116,18,112,25],[116,21,112,29],[116,25,112,33],[117,6,112,35],[118,6,113,12],[118,7,113,13,"dostime"],[118,14,113,20],[118,17,113,23],[118,21,113,27],[118,26,113,32],[118,27,113,33],[118,28,113,34],[118,29,113,35],[118,30,113,36],[118,31,113,37],[119,4,114,4],[120,2,115,0],[120,3,115,1],[121,2,116,0,"module"],[121,8,116,6],[121,9,116,7,"exports"],[121,16,116,14],[121,19,116,17,"DataReader"],[121,29,116,27],[122,0,116,28],[122,3]],"functionMap":{"names":["<global>","DataReader","prototype.checkOffset","prototype.checkIndex","prototype.setIndex","prototype.skip","prototype.byteAt","prototype.readInt","prototype.readString","prototype.readData","prototype.lastIndexOfSignature","prototype.readAndCheckSignature","prototype.readDate"],"mappings":"AAA;ACG;CDK;iBEO;KFE;gBGM;KHI;cIM;KJG;UKM;KLE;YMM;KNE;aOM;KPS;gBQM;KRE;cSM;KTE;0BUM;KVE;2BWM;KXE;cYK;KZS"},"hasCjsExports":true},"type":"js/module"}]}