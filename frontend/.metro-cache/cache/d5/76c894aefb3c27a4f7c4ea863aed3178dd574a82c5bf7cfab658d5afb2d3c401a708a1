{"dependencies":[{"name":"./utils","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":2,"column":12,"index":26},"end":{"line":2,"column":30,"index":44}}],"key":"Arg6QRuIuy5D/jfcnxX1qJiHjX8=","exportNames":["*"],"imports":1}},{"name":"./external","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":3,"column":15,"index":61},"end":{"line":3,"column":36,"index":82}}],"key":"QL2F6eMufCnxfFx6fPaowRoFhE4=","exportNames":["*"],"imports":1}},{"name":"./utf8","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":11,"index":95},"end":{"line":4,"column":28,"index":112}}],"key":"VSkyiflWoZ6NNcr2kHLlSXRzfqg=","exportNames":["*"],"imports":1}},{"name":"./zipEntries","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":5,"column":17,"index":131},"end":{"line":5,"column":40,"index":154}}],"key":"05+RDcQw/2qxKdLlQx0RwdnPoVU=","exportNames":["*"],"imports":1}},{"name":"./stream/Crc32Probe","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":6,"column":17,"index":173},"end":{"line":6,"column":47,"index":203}}],"key":"iNmQZVomv0ytuXXWqGZ6FV6jCJU=","exportNames":["*"],"imports":1}},{"name":"./nodejsUtils","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":18,"index":223},"end":{"line":7,"column":42,"index":247}}],"key":"bBitJEByTF8oigMLjGWnzU9hSVo=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var utils = require(_dependencyMap[0], \"./utils\");\n  var external = require(_dependencyMap[1], \"./external\");\n  var utf8 = require(_dependencyMap[2], \"./utf8\");\n  var ZipEntries = require(_dependencyMap[3], \"./zipEntries\");\n  var Crc32Probe = require(_dependencyMap[4], \"./stream/Crc32Probe\");\n  var nodejsUtils = require(_dependencyMap[5], \"./nodejsUtils\");\n\n  /**\n   * Check the CRC32 of an entry.\n   * @param {ZipEntry} zipEntry the zip entry to check.\n   * @return {Promise} the result.\n   */\n  function checkEntryCRC32(zipEntry) {\n    return new external.Promise(function (resolve, reject) {\n      var worker = zipEntry.decompressed.getContentWorker().pipe(new Crc32Probe());\n      worker.on(\"error\", function (e) {\n        reject(e);\n      }).on(\"end\", function () {\n        if (worker.streamInfo.crc32 !== zipEntry.decompressed.crc32) {\n          reject(new Error(\"Corrupted zip : CRC32 mismatch\"));\n        } else {\n          resolve();\n        }\n      }).resume();\n    });\n  }\n  module.exports = function (data, options) {\n    var zip = this;\n    options = utils.extend(options || {}, {\n      base64: false,\n      checkCRC32: false,\n      optimizedBinaryString: false,\n      createFolders: false,\n      decodeFileName: utf8.utf8decode\n    });\n    if (nodejsUtils.isNode && nodejsUtils.isStream(data)) {\n      return external.Promise.reject(new Error(\"JSZip can't accept a stream when loading a zip file.\"));\n    }\n    return utils.prepareContent(\"the loaded zip file\", data, true, options.optimizedBinaryString, options.base64).then(function (data) {\n      var zipEntries = new ZipEntries(options);\n      zipEntries.load(data);\n      return zipEntries;\n    }).then(function checkCRC32(zipEntries) {\n      var promises = [external.Promise.resolve(zipEntries)];\n      var files = zipEntries.files;\n      if (options.checkCRC32) {\n        for (var i = 0; i < files.length; i++) {\n          promises.push(checkEntryCRC32(files[i]));\n        }\n      }\n      return external.Promise.all(promises);\n    }).then(function addFiles(results) {\n      var zipEntries = results.shift();\n      var files = zipEntries.files;\n      for (var i = 0; i < files.length; i++) {\n        var input = files[i];\n        var unsafeName = input.fileNameStr;\n        var safeName = utils.resolve(input.fileNameStr);\n        zip.file(safeName, input.decompressed, {\n          binary: true,\n          optimizedBinaryString: true,\n          date: input.date,\n          dir: input.dir,\n          comment: input.fileCommentStr.length ? input.fileCommentStr : null,\n          unixPermissions: input.unixPermissions,\n          dosPermissions: input.dosPermissions,\n          createFolders: options.createFolders\n        });\n        if (!input.dir) {\n          zip.file(safeName).unsafeOriginalName = unsafeName;\n        }\n      }\n      if (zipEntries.zipComment.length) {\n        zip.comment = zipEntries.zipComment;\n      }\n      return zip;\n    });\n  };\n});","lineCount":82,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0],[4,6,2,4,"utils"],[4,11,2,9],[4,14,2,12,"require"],[4,21,2,19],[4,22,2,19,"_dependencyMap"],[4,36,2,19],[4,50,2,29],[4,51,2,30],[5,2,3,0],[5,6,3,4,"external"],[5,14,3,12],[5,17,3,15,"require"],[5,24,3,22],[5,25,3,22,"_dependencyMap"],[5,39,3,22],[5,56,3,35],[5,57,3,36],[6,2,4,0],[6,6,4,4,"utf8"],[6,10,4,8],[6,13,4,11,"require"],[6,20,4,18],[6,21,4,18,"_dependencyMap"],[6,35,4,18],[6,48,4,27],[6,49,4,28],[7,2,5,0],[7,6,5,4,"ZipEntries"],[7,16,5,14],[7,19,5,17,"require"],[7,26,5,24],[7,27,5,24,"_dependencyMap"],[7,41,5,24],[7,60,5,39],[7,61,5,40],[8,2,6,0],[8,6,6,4,"Crc32Probe"],[8,16,6,14],[8,19,6,17,"require"],[8,26,6,24],[8,27,6,24,"_dependencyMap"],[8,41,6,24],[8,67,6,46],[8,68,6,47],[9,2,7,0],[9,6,7,4,"nodejsUtils"],[9,17,7,15],[9,20,7,18,"require"],[9,27,7,25],[9,28,7,25,"_dependencyMap"],[9,42,7,25],[9,62,7,41],[9,63,7,42],[11,2,9,0],[12,0,10,0],[13,0,11,0],[14,0,12,0],[15,0,13,0],[16,2,14,0],[16,11,14,9,"checkEntryCRC32"],[16,26,14,24,"checkEntryCRC32"],[16,27,14,25,"zipEntry"],[16,35,14,33],[16,37,14,35],[17,4,15,4],[17,11,15,11],[17,15,15,15,"external"],[17,23,15,23],[17,24,15,24,"Promise"],[17,31,15,31],[17,32,15,32],[17,42,15,42,"resolve"],[17,49,15,49],[17,51,15,51,"reject"],[17,57,15,57],[17,59,15,59],[18,6,16,8],[18,10,16,12,"worker"],[18,16,16,18],[18,19,16,21,"zipEntry"],[18,27,16,29],[18,28,16,30,"decompressed"],[18,40,16,42],[18,41,16,43,"getContentWorker"],[18,57,16,59],[18,58,16,60],[18,59,16,61],[18,60,16,62,"pipe"],[18,64,16,66],[18,65,16,67],[18,69,16,71,"Crc32Probe"],[18,79,16,81],[18,80,16,82],[18,81,16,83],[18,82,16,84],[19,6,17,8,"worker"],[19,12,17,14],[19,13,17,15,"on"],[19,15,17,17],[19,16,17,18],[19,23,17,25],[19,25,17,27],[19,35,17,37,"e"],[19,36,17,38],[19,38,17,40],[20,8,18,12,"reject"],[20,14,18,18],[20,15,18,19,"e"],[20,16,18,20],[20,17,18,21],[21,6,19,8],[21,7,19,9],[21,8,19,10],[21,9,20,13,"on"],[21,11,20,15],[21,12,20,16],[21,17,20,21],[21,19,20,23],[21,31,20,35],[22,8,21,16],[22,12,21,20,"worker"],[22,18,21,26],[22,19,21,27,"streamInfo"],[22,29,21,37],[22,30,21,38,"crc32"],[22,35,21,43],[22,40,21,48,"zipEntry"],[22,48,21,56],[22,49,21,57,"decompressed"],[22,61,21,69],[22,62,21,70,"crc32"],[22,67,21,75],[22,69,21,77],[23,10,22,20,"reject"],[23,16,22,26],[23,17,22,27],[23,21,22,31,"Error"],[23,26,22,36],[23,27,22,37],[23,59,22,69],[23,60,22,70],[23,61,22,71],[24,8,23,16],[24,9,23,17],[24,15,23,23],[25,10,24,20,"resolve"],[25,17,24,27],[25,18,24,28],[25,19,24,29],[26,8,25,16],[27,6,26,12],[27,7,26,13],[27,8,26,14],[27,9,27,13,"resume"],[27,15,27,19],[27,16,27,20],[27,17,27,21],[28,4,28,4],[28,5,28,5],[28,6,28,6],[29,2,29,0],[30,2,31,0,"module"],[30,8,31,6],[30,9,31,7,"exports"],[30,16,31,14],[30,19,31,17],[30,29,31,27,"data"],[30,33,31,31],[30,35,31,33,"options"],[30,42,31,40],[30,44,31,42],[31,4,32,4],[31,8,32,8,"zip"],[31,11,32,11],[31,14,32,14],[31,18,32,18],[32,4,33,4,"options"],[32,11,33,11],[32,14,33,14,"utils"],[32,19,33,19],[32,20,33,20,"extend"],[32,26,33,26],[32,27,33,27,"options"],[32,34,33,34],[32,38,33,38],[32,39,33,39],[32,40,33,40],[32,42,33,42],[33,6,34,8,"base64"],[33,12,34,14],[33,14,34,16],[33,19,34,21],[34,6,35,8,"checkCRC32"],[34,16,35,18],[34,18,35,20],[34,23,35,25],[35,6,36,8,"optimizedBinaryString"],[35,27,36,29],[35,29,36,31],[35,34,36,36],[36,6,37,8,"createFolders"],[36,19,37,21],[36,21,37,23],[36,26,37,28],[37,6,38,8,"decodeFileName"],[37,20,38,22],[37,22,38,24,"utf8"],[37,26,38,28],[37,27,38,29,"utf8decode"],[38,4,39,4],[38,5,39,5],[38,6,39,6],[39,4,41,4],[39,8,41,8,"nodejsUtils"],[39,19,41,19],[39,20,41,20,"isNode"],[39,26,41,26],[39,30,41,30,"nodejsUtils"],[39,41,41,41],[39,42,41,42,"isStream"],[39,50,41,50],[39,51,41,51,"data"],[39,55,41,55],[39,56,41,56],[39,58,41,58],[40,6,42,8],[40,13,42,15,"external"],[40,21,42,23],[40,22,42,24,"Promise"],[40,29,42,31],[40,30,42,32,"reject"],[40,36,42,38],[40,37,42,39],[40,41,42,43,"Error"],[40,46,42,48],[40,47,42,49],[40,101,42,103],[40,102,42,104],[40,103,42,105],[41,4,43,4],[42,4,45,4],[42,11,45,11,"utils"],[42,16,45,16],[42,17,45,17,"prepareContent"],[42,31,45,31],[42,32,45,32],[42,53,45,53],[42,55,45,55,"data"],[42,59,45,59],[42,61,45,61],[42,65,45,65],[42,67,45,67,"options"],[42,74,45,74],[42,75,45,75,"optimizedBinaryString"],[42,96,45,96],[42,98,45,98,"options"],[42,105,45,105],[42,106,45,106,"base64"],[42,112,45,112],[42,113,45,113],[42,114,46,9,"then"],[42,118,46,13],[42,119,46,14],[42,129,46,24,"data"],[42,133,46,28],[42,135,46,30],[43,6,47,12],[43,10,47,16,"zipEntries"],[43,20,47,26],[43,23,47,29],[43,27,47,33,"ZipEntries"],[43,37,47,43],[43,38,47,44,"options"],[43,45,47,51],[43,46,47,52],[44,6,48,12,"zipEntries"],[44,16,48,22],[44,17,48,23,"load"],[44,21,48,27],[44,22,48,28,"data"],[44,26,48,32],[44,27,48,33],[45,6,49,12],[45,13,49,19,"zipEntries"],[45,23,49,29],[46,4,50,8],[46,5,50,9],[46,6,50,10],[46,7,50,11,"then"],[46,11,50,15],[46,12,50,16],[46,21,50,25,"checkCRC32"],[46,31,50,35,"checkCRC32"],[46,32,50,36,"zipEntries"],[46,42,50,46],[46,44,50,48],[47,6,51,12],[47,10,51,16,"promises"],[47,18,51,24],[47,21,51,27],[47,22,51,28,"external"],[47,30,51,36],[47,31,51,37,"Promise"],[47,38,51,44],[47,39,51,45,"resolve"],[47,46,51,52],[47,47,51,53,"zipEntries"],[47,57,51,63],[47,58,51,64],[47,59,51,65],[48,6,52,12],[48,10,52,16,"files"],[48,15,52,21],[48,18,52,24,"zipEntries"],[48,28,52,34],[48,29,52,35,"files"],[48,34,52,40],[49,6,53,12],[49,10,53,16,"options"],[49,17,53,23],[49,18,53,24,"checkCRC32"],[49,28,53,34],[49,30,53,36],[50,8,54,16],[50,13,54,21],[50,17,54,25,"i"],[50,18,54,26],[50,21,54,29],[50,22,54,30],[50,24,54,32,"i"],[50,25,54,33],[50,28,54,36,"files"],[50,33,54,41],[50,34,54,42,"length"],[50,40,54,48],[50,42,54,50,"i"],[50,43,54,51],[50,45,54,53],[50,47,54,55],[51,10,55,20,"promises"],[51,18,55,28],[51,19,55,29,"push"],[51,23,55,33],[51,24,55,34,"checkEntryCRC32"],[51,39,55,49],[51,40,55,50,"files"],[51,45,55,55],[51,46,55,56,"i"],[51,47,55,57],[51,48,55,58],[51,49,55,59],[51,50,55,60],[52,8,56,16],[53,6,57,12],[54,6,58,12],[54,13,58,19,"external"],[54,21,58,27],[54,22,58,28,"Promise"],[54,29,58,35],[54,30,58,36,"all"],[54,33,58,39],[54,34,58,40,"promises"],[54,42,58,48],[54,43,58,49],[55,4,59,8],[55,5,59,9],[55,6,59,10],[55,7,59,11,"then"],[55,11,59,15],[55,12,59,16],[55,21,59,25,"addFiles"],[55,29,59,33,"addFiles"],[55,30,59,34,"results"],[55,37,59,41],[55,39,59,43],[56,6,60,12],[56,10,60,16,"zipEntries"],[56,20,60,26],[56,23,60,29,"results"],[56,30,60,36],[56,31,60,37,"shift"],[56,36,60,42],[56,37,60,43],[56,38,60,44],[57,6,61,12],[57,10,61,16,"files"],[57,15,61,21],[57,18,61,24,"zipEntries"],[57,28,61,34],[57,29,61,35,"files"],[57,34,61,40],[58,6,62,12],[58,11,62,17],[58,15,62,21,"i"],[58,16,62,22],[58,19,62,25],[58,20,62,26],[58,22,62,28,"i"],[58,23,62,29],[58,26,62,32,"files"],[58,31,62,37],[58,32,62,38,"length"],[58,38,62,44],[58,40,62,46,"i"],[58,41,62,47],[58,43,62,49],[58,45,62,51],[59,8,63,16],[59,12,63,20,"input"],[59,17,63,25],[59,20,63,28,"files"],[59,25,63,33],[59,26,63,34,"i"],[59,27,63,35],[59,28,63,36],[60,8,65,16],[60,12,65,20,"unsafeName"],[60,22,65,30],[60,25,65,33,"input"],[60,30,65,38],[60,31,65,39,"fileNameStr"],[60,42,65,50],[61,8,66,16],[61,12,66,20,"safeName"],[61,20,66,28],[61,23,66,31,"utils"],[61,28,66,36],[61,29,66,37,"resolve"],[61,36,66,44],[61,37,66,45,"input"],[61,42,66,50],[61,43,66,51,"fileNameStr"],[61,54,66,62],[61,55,66,63],[62,8,68,16,"zip"],[62,11,68,19],[62,12,68,20,"file"],[62,16,68,24],[62,17,68,25,"safeName"],[62,25,68,33],[62,27,68,35,"input"],[62,32,68,40],[62,33,68,41,"decompressed"],[62,45,68,53],[62,47,68,55],[63,10,69,20,"binary"],[63,16,69,26],[63,18,69,28],[63,22,69,32],[64,10,70,20,"optimizedBinaryString"],[64,31,70,41],[64,33,70,43],[64,37,70,47],[65,10,71,20,"date"],[65,14,71,24],[65,16,71,26,"input"],[65,21,71,31],[65,22,71,32,"date"],[65,26,71,36],[66,10,72,20,"dir"],[66,13,72,23],[66,15,72,25,"input"],[66,20,72,30],[66,21,72,31,"dir"],[66,24,72,34],[67,10,73,20,"comment"],[67,17,73,27],[67,19,73,29,"input"],[67,24,73,34],[67,25,73,35,"fileCommentStr"],[67,39,73,49],[67,40,73,50,"length"],[67,46,73,56],[67,49,73,59,"input"],[67,54,73,64],[67,55,73,65,"fileCommentStr"],[67,69,73,79],[67,72,73,82],[67,76,73,86],[68,10,74,20,"unixPermissions"],[68,25,74,35],[68,27,74,37,"input"],[68,32,74,42],[68,33,74,43,"unixPermissions"],[68,48,74,58],[69,10,75,20,"dosPermissions"],[69,24,75,34],[69,26,75,36,"input"],[69,31,75,41],[69,32,75,42,"dosPermissions"],[69,46,75,56],[70,10,76,20,"createFolders"],[70,23,76,33],[70,25,76,35,"options"],[70,32,76,42],[70,33,76,43,"createFolders"],[71,8,77,16],[71,9,77,17],[71,10,77,18],[72,8,78,16],[72,12,78,20],[72,13,78,21,"input"],[72,18,78,26],[72,19,78,27,"dir"],[72,22,78,30],[72,24,78,32],[73,10,79,20,"zip"],[73,13,79,23],[73,14,79,24,"file"],[73,18,79,28],[73,19,79,29,"safeName"],[73,27,79,37],[73,28,79,38],[73,29,79,39,"unsafeOriginalName"],[73,47,79,57],[73,50,79,60,"unsafeName"],[73,60,79,70],[74,8,80,16],[75,6,81,12],[76,6,82,12],[76,10,82,16,"zipEntries"],[76,20,82,26],[76,21,82,27,"zipComment"],[76,31,82,37],[76,32,82,38,"length"],[76,38,82,44],[76,40,82,46],[77,8,83,16,"zip"],[77,11,83,19],[77,12,83,20,"comment"],[77,19,83,27],[77,22,83,30,"zipEntries"],[77,32,83,40],[77,33,83,41,"zipComment"],[77,43,83,51],[78,6,84,12],[79,6,86,12],[79,13,86,19,"zip"],[79,16,86,22],[80,4,87,8],[80,5,87,9],[80,6,87,10],[81,2,88,0],[81,3,88,1],[82,0,88,2],[82,3]],"functionMap":{"names":["<global>","checkEntryCRC32","external.Promise$argument_0","worker.on$argument_1","worker.on.on$argument_1","module.exports","utils.prepareContent.then$argument_0","checkCRC32","addFiles"],"mappings":"AAA;ACa;gCCC;2BCE;SDE;uBEC;aFM;KDE;CDC;iBKE;cCe;SDI,OE;SFS,OG;SH4B;CLC"},"hasCjsExports":true},"type":"js/module"}]}