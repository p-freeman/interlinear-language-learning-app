{"dependencies":[{"name":"./external","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":3,"column":15,"index":30},"end":{"line":3,"column":36,"index":51}}],"key":"QL2F6eMufCnxfFx6fPaowRoFhE4=","exportNames":["*"],"imports":1}},{"name":"./stream/DataWorker","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":17,"index":70},"end":{"line":4,"column":47,"index":100}}],"key":"P8M77B/leuUf0ehUXciMLdgxUn0=","exportNames":["*"],"imports":1}},{"name":"./stream/Crc32Probe","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":5,"column":17,"index":119},"end":{"line":5,"column":47,"index":149}}],"key":"iNmQZVomv0ytuXXWqGZ6FV6jCJU=","exportNames":["*"],"imports":1}},{"name":"./stream/DataLengthProbe","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":6,"column":22,"index":173},"end":{"line":6,"column":57,"index":208}}],"key":"DRyDrUBQwSAjT9AVF6Ahs254Eeo=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var external = require(_dependencyMap[0], \"./external\");\n  var DataWorker = require(_dependencyMap[1], \"./stream/DataWorker\");\n  var Crc32Probe = require(_dependencyMap[2], \"./stream/Crc32Probe\");\n  var DataLengthProbe = require(_dependencyMap[3], \"./stream/DataLengthProbe\");\n\n  /**\n   * Represent a compressed object, with everything needed to decompress it.\n   * @constructor\n   * @param {number} compressedSize the size of the data compressed.\n   * @param {number} uncompressedSize the size of the data after decompression.\n   * @param {number} crc32 the crc32 of the decompressed file.\n   * @param {object} compression the type of compression, see lib/compressions.js.\n   * @param {String|ArrayBuffer|Uint8Array|Buffer} data the compressed data.\n   */\n  function CompressedObject(compressedSize, uncompressedSize, crc32, compression, data) {\n    this.compressedSize = compressedSize;\n    this.uncompressedSize = uncompressedSize;\n    this.crc32 = crc32;\n    this.compression = compression;\n    this.compressedContent = data;\n  }\n  CompressedObject.prototype = {\n    /**\n     * Create a worker to get the uncompressed content.\n     * @return {GenericWorker} the worker.\n     */\n    getContentWorker: function () {\n      var worker = new DataWorker(external.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new DataLengthProbe(\"data_length\"));\n      var that = this;\n      worker.on(\"end\", function () {\n        if (this.streamInfo[\"data_length\"] !== that.uncompressedSize) {\n          throw new Error(\"Bug : uncompressed data size mismatch\");\n        }\n      });\n      return worker;\n    },\n    /**\n     * Create a worker to get the compressed content.\n     * @return {GenericWorker} the worker.\n     */\n    getCompressedWorker: function () {\n      return new DataWorker(external.Promise.resolve(this.compressedContent)).withStreamInfo(\"compressedSize\", this.compressedSize).withStreamInfo(\"uncompressedSize\", this.uncompressedSize).withStreamInfo(\"crc32\", this.crc32).withStreamInfo(\"compression\", this.compression);\n    }\n  };\n\n  /**\n   * Chain the given worker with other workers to compress the content with the\n   * given compression.\n   * @param {GenericWorker} uncompressedWorker the worker to pipe.\n   * @param {Object} compression the compression object.\n   * @param {Object} compressionOptions the options to use when compressing.\n   * @return {GenericWorker} the new worker compressing the content.\n   */\n  CompressedObject.createWorkerFrom = function (uncompressedWorker, compression, compressionOptions) {\n    return uncompressedWorker.pipe(new Crc32Probe()).pipe(new DataLengthProbe(\"uncompressedSize\")).pipe(compression.compressWorker(compressionOptions)).pipe(new DataLengthProbe(\"compressedSize\")).withStreamInfo(\"compression\", compression);\n  };\n  module.exports = CompressedObject;\n});","lineCount":61,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0],[4,6,3,4,"external"],[4,14,3,12],[4,17,3,15,"require"],[4,24,3,22],[4,25,3,22,"_dependencyMap"],[4,39,3,22],[4,56,3,35],[4,57,3,36],[5,2,4,0],[5,6,4,4,"DataWorker"],[5,16,4,14],[5,19,4,17,"require"],[5,26,4,24],[5,27,4,24,"_dependencyMap"],[5,41,4,24],[5,67,4,46],[5,68,4,47],[6,2,5,0],[6,6,5,4,"Crc32Probe"],[6,16,5,14],[6,19,5,17,"require"],[6,26,5,24],[6,27,5,24,"_dependencyMap"],[6,41,5,24],[6,67,5,46],[6,68,5,47],[7,2,6,0],[7,6,6,4,"DataLengthProbe"],[7,21,6,19],[7,24,6,22,"require"],[7,31,6,29],[7,32,6,29,"_dependencyMap"],[7,46,6,29],[7,77,6,56],[7,78,6,57],[9,2,8,0],[10,0,9,0],[11,0,10,0],[12,0,11,0],[13,0,12,0],[14,0,13,0],[15,0,14,0],[16,0,15,0],[17,0,16,0],[18,2,17,0],[18,11,17,9,"CompressedObject"],[18,27,17,25,"CompressedObject"],[18,28,17,26,"compressedSize"],[18,42,17,40],[18,44,17,42,"uncompressedSize"],[18,60,17,58],[18,62,17,60,"crc32"],[18,67,17,65],[18,69,17,67,"compression"],[18,80,17,78],[18,82,17,80,"data"],[18,86,17,84],[18,88,17,86],[19,4,18,4],[19,8,18,8],[19,9,18,9,"compressedSize"],[19,23,18,23],[19,26,18,26,"compressedSize"],[19,40,18,40],[20,4,19,4],[20,8,19,8],[20,9,19,9,"uncompressedSize"],[20,25,19,25],[20,28,19,28,"uncompressedSize"],[20,44,19,44],[21,4,20,4],[21,8,20,8],[21,9,20,9,"crc32"],[21,14,20,14],[21,17,20,17,"crc32"],[21,22,20,22],[22,4,21,4],[22,8,21,8],[22,9,21,9,"compression"],[22,20,21,20],[22,23,21,23,"compression"],[22,34,21,34],[23,4,22,4],[23,8,22,8],[23,9,22,9,"compressedContent"],[23,26,22,26],[23,29,22,29,"data"],[23,33,22,33],[24,2,23,0],[25,2,25,0,"CompressedObject"],[25,18,25,16],[25,19,25,17,"prototype"],[25,28,25,26],[25,31,25,29],[26,4,26,4],[27,0,27,0],[28,0,28,0],[29,0,29,0],[30,4,30,4,"getContentWorker"],[30,20,30,20],[30,22,30,22],[30,31,30,22,"getContentWorker"],[30,32,30,22],[30,34,30,34],[31,6,31,8],[31,10,31,12,"worker"],[31,16,31,18],[31,19,31,21],[31,23,31,25,"DataWorker"],[31,33,31,35],[31,34,31,36,"external"],[31,42,31,44],[31,43,31,45,"Promise"],[31,50,31,52],[31,51,31,53,"resolve"],[31,58,31,60],[31,59,31,61],[31,63,31,65],[31,64,31,66,"compressedContent"],[31,81,31,83],[31,82,31,84],[31,83,31,85],[31,84,32,13,"pipe"],[31,88,32,17],[31,89,32,18],[31,93,32,22],[31,94,32,23,"compression"],[31,105,32,34],[31,106,32,35,"uncompressWorker"],[31,122,32,51],[31,123,32,52],[31,124,32,53],[31,125,32,54],[31,126,33,13,"pipe"],[31,130,33,17],[31,131,33,18],[31,135,33,22,"DataLengthProbe"],[31,150,33,37],[31,151,33,38],[31,164,33,51],[31,165,33,52],[31,166,33,53],[32,6,35,8],[32,10,35,12,"that"],[32,14,35,16],[32,17,35,19],[32,21,35,23],[33,6,36,8,"worker"],[33,12,36,14],[33,13,36,15,"on"],[33,15,36,17],[33,16,36,18],[33,21,36,23],[33,23,36,25],[33,35,36,37],[34,8,37,12],[34,12,37,16],[34,16,37,20],[34,17,37,21,"streamInfo"],[34,27,37,31],[34,28,37,32],[34,41,37,45],[34,42,37,46],[34,47,37,51,"that"],[34,51,37,55],[34,52,37,56,"uncompressedSize"],[34,68,37,72],[34,70,37,74],[35,10,38,16],[35,16,38,22],[35,20,38,26,"Error"],[35,25,38,31],[35,26,38,32],[35,65,38,71],[35,66,38,72],[36,8,39,12],[37,6,40,8],[37,7,40,9],[37,8,40,10],[38,6,41,8],[38,13,41,15,"worker"],[38,19,41,21],[39,4,42,4],[39,5,42,5],[40,4,43,4],[41,0,44,0],[42,0,45,0],[43,0,46,0],[44,4,47,4,"getCompressedWorker"],[44,23,47,23],[44,25,47,25],[44,34,47,25,"getCompressedWorker"],[44,35,47,25],[44,37,47,37],[45,6,48,8],[45,13,48,15],[45,17,48,19,"DataWorker"],[45,27,48,29],[45,28,48,30,"external"],[45,36,48,38],[45,37,48,39,"Promise"],[45,44,48,46],[45,45,48,47,"resolve"],[45,52,48,54],[45,53,48,55],[45,57,48,59],[45,58,48,60,"compressedContent"],[45,75,48,77],[45,76,48,78],[45,77,48,79],[45,78,49,13,"withStreamInfo"],[45,92,49,27],[45,93,49,28],[45,109,49,44],[45,111,49,46],[45,115,49,50],[45,116,49,51,"compressedSize"],[45,130,49,65],[45,131,49,66],[45,132,50,13,"withStreamInfo"],[45,146,50,27],[45,147,50,28],[45,165,50,46],[45,167,50,48],[45,171,50,52],[45,172,50,53,"uncompressedSize"],[45,188,50,69],[45,189,50,70],[45,190,51,13,"withStreamInfo"],[45,204,51,27],[45,205,51,28],[45,212,51,35],[45,214,51,37],[45,218,51,41],[45,219,51,42,"crc32"],[45,224,51,47],[45,225,51,48],[45,226,52,13,"withStreamInfo"],[45,240,52,27],[45,241,52,28],[45,254,52,41],[45,256,52,43],[45,260,52,47],[45,261,52,48,"compression"],[45,272,52,59],[45,273,52,60],[46,4,54,4],[47,2,55,0],[47,3,55,1],[49,2,57,0],[50,0,58,0],[51,0,59,0],[52,0,60,0],[53,0,61,0],[54,0,62,0],[55,0,63,0],[56,0,64,0],[57,2,65,0,"CompressedObject"],[57,18,65,16],[57,19,65,17,"createWorkerFrom"],[57,35,65,33],[57,38,65,36],[57,48,65,46,"uncompressedWorker"],[57,66,65,64],[57,68,65,66,"compression"],[57,79,65,77],[57,81,65,79,"compressionOptions"],[57,99,65,97],[57,101,65,99],[58,4,66,4],[58,11,66,11,"uncompressedWorker"],[58,29,66,29],[58,30,67,9,"pipe"],[58,34,67,13],[58,35,67,14],[58,39,67,18,"Crc32Probe"],[58,49,67,28],[58,50,67,29],[58,51,67,30],[58,52,67,31],[58,53,68,9,"pipe"],[58,57,68,13],[58,58,68,14],[58,62,68,18,"DataLengthProbe"],[58,77,68,33],[58,78,68,34],[58,96,68,52],[58,97,68,53],[58,98,68,54],[58,99,69,9,"pipe"],[58,103,69,13],[58,104,69,14,"compression"],[58,115,69,25],[58,116,69,26,"compressWorker"],[58,130,69,40],[58,131,69,41,"compressionOptions"],[58,149,69,59],[58,150,69,60],[58,151,69,61],[58,152,70,9,"pipe"],[58,156,70,13],[58,157,70,14],[58,161,70,18,"DataLengthProbe"],[58,176,70,33],[58,177,70,34],[58,193,70,50],[58,194,70,51],[58,195,70,52],[58,196,71,9,"withStreamInfo"],[58,210,71,23],[58,211,71,24],[58,224,71,37],[58,226,71,39,"compression"],[58,237,71,50],[58,238,71,51],[59,2,72,0],[59,3,72,1],[60,2,74,0,"module"],[60,8,74,6],[60,9,74,7,"exports"],[60,16,74,14],[60,19,74,17,"CompressedObject"],[60,35,74,33],[61,0,74,34],[61,3]],"functionMap":{"names":["<global>","CompressedObject","CompressedObject.prototype.getContentWorker","worker.on$argument_1","CompressedObject.prototype.getCompressedWorker","CompressedObject.createWorkerFrom"],"mappings":"AAA;ACgB;CDM;sBEO;yBCM;SDI;KFE;yBIK;KJO;oCKW;CLO"},"hasCjsExports":true},"type":"js/module"}]}